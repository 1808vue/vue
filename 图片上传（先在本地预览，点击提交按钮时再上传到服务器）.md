##### 图片上传

###### （先在本地预览，点击提交按钮时再上传到服务器）

```
<template>
  <div>
    <div id="ddd">
      <div class="add-pic" @click="addPic()">
        <img src="../../image/u286_r2_c2.jpg" class="add-img"><!-- 一开始显示的图片，点击选择照片后隐藏 -->
        <input name="files" id="uploaderInput" type="file" accept="image/*" multiple />
      </div>
      <div id="img-group">
        <div class="img-item">
          <img :src="img" alt="">
          </div>
        </div>
      </div>
      <span>{{span}}</span>
      <br>
      <span @click="tijiao">提交</span>
    </div>
</template>
<script>
  import { Toast } from 'mint-ui';
export default {
  data() {
    return {
      img:'',
      picFlag: true,
      span:'文字',
      file:{}
    }
  },
  created: function() {

  },
  methods: {
     addPic(){
        var vm = this;
        var input = document.getElementById('uploaderInput');
        input.addEventListener('change', function(e){
          var addImg = document.getElementsByClassName('add-img')[0];
          addImg.style.display='none';//隐藏
            var files = input.files;
            vm.file=files[0];//将file保存，用于上传服务器
            var reader = new FileReader();
            reader.readAsDataURL(files[0]);
            reader.onload = function () {
              vm.img=this.result;
            };
        });
    },
    tijiao(){
      let params = new FormData();
      params.append('file',this.file);
      params.append('street',this.span);
      this.$axios.post(this.API().addDistributionApplyUser,params,{headers: {'Content-Type': 'multipart/form-data'}})
      //提交给后端的接口this.API().addDistributionApplyUser
          .then((res) => {
            console.log(res.data);
            if (res.data.code == 0) {
              Toast({
                message: '已提交申请',
                iconClass: "fa fa-check-circle",
                position: 'center',
                duration: 1000
              });
              this.$router.push('/homecen/home');
            }else{
              Toast({
                message: res.data.message,
                iconClass: "fa fa-times-circle",
                position: 'center',
                duration: 1000
              });
            }
          })
          .catch((res) => {
            console.log(res.data.message)
          })
    }
  },

}

</script>
<style lang="less" scoped type="text/css">
@import url('../../styls/main.less');
/* less预处理语言 
.w(@px){
    width: unit(@px/37.5,rem);
}
*/
.hide {
  display: none;
}

#ddd {
  position: relative;
  .w(375);
  .h(165);
  display: flex;
  justify-content: center;

  .img-item {
    z-index: 100;
    .w(285);
    .h(165);
    .border-radius(10, 10, 10, 10);
  }

  .img-item img {
    width: 100%;
    height: 100%;
    .border-radius(10, 10, 10, 10);
  }

  .add-pic {
    .w(285);
    .h(165);
    .border-radius(10, 10, 10, 10);
    position: absolute;
    .top(0);
    .left(45);
    .lh(165);
    text-align: center;

    img {
      .w(285);
      .h(165);
    }

    .you {
      display: none;
    }
  }

  .add-pic input {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
  }
}

</style>

```

